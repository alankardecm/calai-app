# Configuração do Supabase (Banco de Dados)

Para que o login e o histórico funcionem, você precisa criar um projeto no Supabase.

## 1. Criar Projeto
1. Acesse [supabase.com](https://supabase.com) e crie uma conta.
2. Clique em "New Project".
3. Dê um nome (ex: `CalAI`) e defina uma senha forte para o banco.
4. Escolha a região mais próxima (São Paulo / Brazil).

## 2. Pegar as Chaves de API
1. No painel do projeto, vá em **Project Settings** (ícone de engrenagem) -> **API**.
2. Copie a `Project URL`.
3. Copie a `anon` `public` key.

## 3. Configurar Variáveis de Ambiente
1. Crie um arquivo chamado `.env` na raiz do projeto (onde está o `package.json`).
2. Cole o seguinte conteúdo, substituindo pelos seus valores:

```env
VITE_SUPABASE_URL=sua_url_do_projeto_aqui
VITE_SUPABASE_ANON_KEY=sua_chave_anon_aqui
```

## 4. Criar a Tabela de Refeições
Vá no **SQL Editor** do Supabase (ícone de terminal na esquerda) e rode este comando para criar a tabela onde salvaremos os dados:

```sql
-- Cria a tabela de refeições
create table meals (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  image_url text,
  food_name text,
  calories int,
  protein int,
  carbs int,
  fat int,
  confidence float,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Habilita segurança (RLS) para que cada usuário só veja seus dados
alter table meals enable row level security;

create policy "Usuários podem ver suas próprias refeições"
  on meals for select
  using ( auth.uid() = user_id );

create policy "Usuários podem inserir suas próprias refeições"
  on meals for insert
  with check ( auth.uid() = user_id );
```

## 5. Configurar Storage (Imagens)
1. Vá em **Storage** (ícone de pasta).
2. Clique em **New Bucket**.
3. Nome: `meal-images`.
4. Deixe como "Public bucket" (para facilitar a visualização no app) ou configure políticas de acesso se preferir privado.
5. Salve.

Pronto! Agora o app já consegue fazer login e salvar dados.
